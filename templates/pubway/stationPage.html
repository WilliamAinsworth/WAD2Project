<!DOCTYPE html>

{% extends 'pubway/base.html' %}
{% load staticfiles %}

<html>
<head lang="en">
    {% block head_title %}
        {{ station.name }}
    {% endblock %}
    {% block style %}
        /* Always set the map height explicitly to define the size of the div
        * element that contains the map. */
        #map {
            height: 400px;
            width: 70%;
        }
        .button {
            background-color: white;
            border: 2px solid #008CBA;
            color: black;
            padding: 8px 20px;
            text-align: center;
            text-decoration: none;
            display: inline-block;
            font-size: 12px;
            margin: 4px 2px;
            -webkit-transition-duration: 0.5s; /* Safari */
            transition-duration: 0.5s;
            cursor: pointer;
        }
        .button:hover {
            background-color: #008CBA;
            color: white;
        }

    {% endblock %}

</head>

<body>
    {% block content %}
        {% if station %}
            <div class="centered">
            <h1>{{ station.name }}</h1>
            <div id="stationTimes">
                <h4>Train times: </h4>
                Monday - Saturday: {{ station.firstTrainMonSat }} - {{ station.lastTrainMonSat }} <br>
                Sunday: {{ station.firstTrainSun }} - {{ station.lastTrainSun }} <br>
            </div>

            <br/>
            <div id="top_places_list">
            <h4>Top places for fun time around {{station.name }}</h4>
            <u1>
            {% for place in top_places %}
                    <a href="{% url 'show_place' place.slug %}">{{ place.name }}</a><br/>
            {% endfor %}
            </u1>
            </div>

            <div id="all_places_list" style="display: none;">
                <h4>All places around {{station.name }}</h4>
                {% for place in places %}
                    <a href="{% url 'show_place' place.slug %}">{{ place.name }}</a><br/>
            {% endfor %}
            </u1>
            </div>


            <div id="buttons">
            <br/>
            <button id="show_button" class="button" onclick="showButton();">Show all</button>
            {% if user.is_authenticated %}
            <a class="button" href="{% url 'add_place' station.slug %}">Add a place to {{ station.name }}</a>
            {% endif %}
            <script>
            function showButton() {
                var all_places_list = document.getElementById("all_places_list");
                var top_places_list = document.getElementById("top_places_list");
                var show_button = document.getElementById("show_button");

                if (all_places_list.style.display === "none") {
                    all_places_list.style.display = "block";
                    top_places_list.style.display = "none";
                    show_button.innerHTML = "Show top"
                } else {
                    all_places_list.style.display = "none";
                    top_places_list.style.display = "block";
                    show_button.innerHTML = "Show all"
                }
            }
            </script>
            </div>


            </div>

            <div class="centered" id="map">

            <script>
            function myMap() {
                var myCenter = new google.maps.LatLng({{ station.latitude }}, {{ station.longitude }});
                var mapCanvas = document.getElementById("map");
                var mapOptions = {center: myCenter, zoom: 16};
                var map = new google.maps.Map(mapCanvas, mapOptions);
                var marker = new google.maps.Marker({position:myCenter});
                marker.setMap(map);

                google.maps.event.addListener(marker,'click',function() {
                    var infowindow = new google.maps.InfoWindow({content:"{{ station.name }} Station!"});
                    infowindow.open(map,marker);
                    });

                infowindow.open(map,marker);
            }
            </script>
            </div>

        {% else %}
            <h1>Station does not exist!</h1>
        {% endif %}
    {% endblock %}
</body>

</html>